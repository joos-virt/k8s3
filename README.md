# k8s3
Kubernetes практика

Оркестрация - процесс автоматического развертывания и управления контейнерами
- Docker swarm (не хватает функий для сложных приложений)
- Kubernetes (самый популярный, не сложный и многофункциональный)
- Mesos (сложный, но продвинутый)

Архитектура

Noda эта машина физическая или виртуально на которой установлен кубернетес 

Вокер нода это компьютер на котором кубернетес будет запускать контейнеры, раньше они назывались миньонами

Кластер это набор сгруппированых вместе узлов, таким образом даже если один узел падает то наше приложение по-прежнему доступно для пользователей, более того наличие нескольких nod также помогают распределению нагрузки

Мастер это еще одна нода член кубернетес сконфигурированая как мастер. У нее особые функции наблюдать за состоянием других нод и быть ответственным за оркестрацию контейнеров на воркер нодах

Компоненты:

- API SERVER - frontend - единый интерфейс Kubernetes, все общаются с api server
- CONTAINER RUNTIME - среда выполнения контейнера - базовое ПО используется для запуска контейнеров
- CONTROLLER - мозг оркестрации, смотрят за состоянием нод, контейнеров, endpoint-ов и ответственны за реакцию за события на нодах. Принимают решения о создании новых контейнеров.
- SCHEDULER - ответственнен за распределение работ или контейнеров между нодами, ожидает появления контейнера, чтобы назначить его выполнение на ноду
- Служба KUBELET - агент который работает на каждом узле кластера, агент отвечает за то чтобы контейнеры работали на узлах должным образом
- Служба ETCD - хранилище ключ-значение, распределенная надежная БД используемая kubernetes для хранения информации нужной для управления кластера. Когда в кластере несколько докер нод, несколько мастеров ETCD хранит свою информацию на всех нодах кластера распределенным образом и отвечают за реализацию блокировок, не допуская конфликты между мастерами

Отличия worker и master

Worker нода или миньон это сервер где размещены контейнеры, например докер контейнер. Для запуска контейнеров докер в системе должна быть установлена среда выполнения контейнера в данном случае это докер, но вовсе не обязательно должен быть он есть и другие контейнер runtime и такие как rkt или cri-o 

Minikube - одноузловой кластер для тестов

https://kubernetes.io/ru/docs/tasks/tools/install-kubectl/

Если установить kubectl перед миникуб то не нужно будет заниматься ее привязкой к кластеру миникуб это сделает за нас

https://kubernetes.io/ru/docs/tasks/tools/install-minikube/
